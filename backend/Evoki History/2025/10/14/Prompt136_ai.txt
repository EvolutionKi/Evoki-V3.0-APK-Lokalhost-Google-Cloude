Timestamp: 14.10.2025, 21:23:33 MESZ
Speaker: ai

Got it. I've updated the TypeScript script with your new AstraDB token. Here is the complete and corrected upload.ts file, ready for you to use. Final TypeScript Script import { DataAPIClient, Collection } from "@datastax/astra-db-ts"; import { pipeline, Pipeline } from '@xenova/transformers'; import { promises as fs } from 'fs'; import * as path from 'path'; // --- Konfiguration --- // 1. Deine AstraDB-Zugangsdaten (neuer Token und Endpoint sind eingetragen) const ASTRA_DB_TOKEN = 'AstraCS:HwytHRkZvufCfpsFTFwgLkje:6b203cae855b56277f37361515f62a11a9223edd14828de916e32bc8480d662c'; // NEUER TOKEN EINGEFÜGT const ASTRA_DB_ENDPOINT = 'https://4a91d4fc-0ecc-48c1-97b0-b0d051f89d1c-us-central1.apps.astra-dev.datastax.com'; const ASTRA_DB_KEYSPACE = 'default_keyspace'; // 2. Dateinamen deiner Originaldateien (müssen im selben Ordner liegen) const JSON_DATEI_PFAD = "Fallstudie Evoki.json"; const TEXT_DATEI_PFAD = "meineAktivitäten.txt"; // 3. Name für die Collection in AstraDB const COLLECTION_NAME = "evoki_wissensbasis_ts"; // --- Hilfsfunktionen zum Verarbeiten der Dateien --- interface TextChunk { text: string; source: string; } async function verarbeiteJsonFallstudie(filePath: string): Promise<TextChunk[]> { console.log(`\n2. Verarbeite JSON-Datei: ${filePath}...`); const chunks: TextChunk[] = []; try { const fileContent = await fs.readFile(filePath, 'utf-8'); const data = JSON.parse(fileContent); // Extrahiere Chatverlauf const chatData = data.gesamter_chatverlauf_vektor || {}; for (const year in chatData) { for (const month in chatData[year]) { for (const day in chatData[year][month]) { const interactions: any[] = chatData[year][month][day]; if (Array.isArray(interactions)) { interactions.forEach(interaction => { const message = (interaction.message || "").trim(); if (message) { const speaker = interaction.speaker || "unbekannt"; chunks.push({ text: `Chat vom ${day}.${month}.${year} (${speaker}): ${message}`, source: "Fallstudie_Chat" }); } }); } } } } console.log(`-> ${chunks.length} Chat-Abschnitte aus JSON extrahiert.`); return chunks; } catch (error) { console.error(`--> FEHLER beim Verarbeiten der JSON-Datei:`, error); return []; } } async function verarbeiteHtmlAktivitaeten(filePath: string): Promise<TextChunk[]> { console.log(`3. Verarbeite Text-Datei (HTML): ${filePath}...`); const chunks: TextChunk[] = []; try { const content = await fs.readFile(filePath, 'utf-8'); // Regex, um die Inhaltsblöcke zu finden const blocks = content.match(/